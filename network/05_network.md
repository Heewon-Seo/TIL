
# LESSON 8 네트워크의 전체 흐름 살펴보기

## 랜 카드에서의 데이터 전달과 처리
![image](https://user-images.githubusercontent.com/87118337/148229829-e2fa5098-5357-4702-bf6f-80c11e2b19a9.png)

![image](https://user-images.githubusercontent.com/87118337/148231063-3b48d436-bbd8-49b1-9e11-e2143584edb0.png)
- 192.168.1.0/24
- 172.16.0.0/16
- 192.168.10.0/24
- 총 3개의 네트워크 구성

![image](https://user-images.githubusercontent.com/87118337/148231152-2d78db95-414b-4a2a-8c89-5f48d2e3ea60.png)
- 캡슐화 및 역캡슐화 
- 응용계층 > URL을 입력하고 엔터 > 캡슐화 > 3-way 핸드셰이크 > 연결 확립 > HTTP 프로토콜로 HTTP 메시지 보냄(GET /index.html HTTP/1 ...) > 이 데이터가 전송 계층에 전달 > 전송 계층에서 TCP 헤더를 붙여서 어느 애플리케이션에 데이터를 보내야 하는지 식별함 > 이때 필요한 것이 출발지 포트번호와 목적지 포트 번호 
  - 출발지 포트 번호(웹 브라우저): 잘 알려진 포트가 아닌 포트(1025번 이상인 포트) 중에서 무작위로 선택
  - 목적지 포트 번호(HTTP): 80번 포트
- 이렇게 세그먼트가 완성 > 네트워크 계층으로 감 > IP 헤더가 붙음 > 여기에는 출발지 IP 주소와 목적지 IP 주소가 추가됨 > IP 패킷 완성 > 이 데이터를 데이터 링크 계층으로 전달 > 여기서 이더넷 헤더가 붙음 > 이더넷 프레임이 됨 > 그다음으로 물리 계층에서 전기 신호로 변환되어 네트워크로 전송됨 

![image](https://user-images.githubusercontent.com/87118337/148391504-9d36658a-490d-4884-bfa5-99790c60de9b.png)

## 스위치와 라우터에서의 데이터 전달과 처리

### 스위치
![image](https://user-images.githubusercontent.com/87118337/148394332-320616a7-2058-4bae-8cd5-627b465756e0.png)
- 데이터 링크 계층에서 데이터를 전기 신호로 변환하여 라우터로 전송

### 라우터
![image](https://user-images.githubusercontent.com/87118337/148394638-243aaaff-d533-4feb-91bf-62583e45d800.png)
- 라우터에 도착한 전기 신호 > 데이터 링크 계층에서 이더넷 프레임의 목적지 MAC 주소와 자신의 MAC 주소를 비교 > 주소가 같으면 이더넷 헤더와 트레일러를 분리하여 역캡슐화 > 네트워크 계층에 전달하고 자신의 라우팅 테이블과 목적지 IP 주소를 비교
- 라우팅 테이블에서 목적지 IP 주소의 경로를 알 수 있으므로 라우팅을 할 수 있음
- 그러므로 현재 출발지 IP 주소를 라우터의 외부 IP 주소로 변경
- 그다음 데이터 링크 계층으로 전달해서 라우터로 보내지도록 이더넷 헤더와 트레일러를 붙이고, 물리 계층에서 데이터를 전기 신호로 변환해서 네트워크로 전달
![image](https://user-images.githubusercontent.com/87118337/148394900-937bc00a-20ce-4328-820b-ed2a8c68bdc0.png)
- 전기신호가 라우터 B에 도착하면 이더넷 프레임의 목적지 MAC 주소와 자신의 MAC 주소를 비교 > 주소가 같으면 이더넷 헤더와 트레일러를 분리 하는 역캡슐화 > 네트워크 계층으로 전달되면 자신의 라우팅 테이블과 목적지 IP를 비교
- 
![image](https://user-images.githubusercontent.com/87118337/148395921-0194238b-bd9a-4b05-bd33-8bd4bc8db8ea.png)
![image](https://user-images.githubusercontent.com/87118337/148399908-5b42f3f1-5ca9-43e7-bf6b-bab9c5b1aa06.png)
![image](https://user-images.githubusercontent.com/87118337/148400479-5cbd94cf-52ba-4861-b37a-3f6afeca6b87.png)
- 스위치 B는 전기 신호를 데이터 링크 계층에서 처리하고 웹 서버에 데이터를 전기 신호로 전달

## 웹 서버에서의 데이터 전달과 처리
![image](https://user-images.githubusercontent.com/87118337/148404389-70d49748-d30b-4ddf-b4f2-76d057b2fca4.png)
- 데이터가 전기신호로 웹 서버에 도착하면, 웹 서버는 데이터 링크 계층에서 이더넷 프레임의 목적지 MAC 주소와 자신의 MAC 주소를 비교 > 주소가 같으면 이더넷 헤더와 트레일러를 분리하고 네트워크 계층에 전달
![image](https://user-images.githubusercontent.com/87118337/148404480-3856f93a-3b7e-4dbf-a0a0-af36df2636e5.png)
- 네트워크 계층에서는 목적지 IP 주소와 웹 서버의 IP 주소를 확인하고 > 같으면 IP 헤더를 분리하고 전송 계층에 전달
![image](https://user-images.githubusercontent.com/87118337/148404669-4d56af14-ec1e-46ba-a3a3-41317a9bf28b.png)
- 전송 계층에서는 목적지 포트 번호를 확인하여 어떤 애플리케이션으로 전달해야 되는지 판단하고 TCP 헤더를 분리하여 응용 계층에 전달
![image](https://user-images.githubusercontent.com/87118337/148404806-8becd957-8527-46cb-a605-1d23f827cba0.png)
- 이제야 응용 계층에 도착

> **정적 라우팅과 동적 라우팅**
> 라우팅은 패킷을 목적지 컴퓨터까지 보낼 떄 최적의 경로를 선택하여 전송하는 것이다.
> 1. 정적 라우팅     
> 정적 라우팅은 관리자가 미리 라우팅 테이블에 경로를 수동으로 추가하는 방법이다. 목적지 까지의 경로를 고정하거나 목적지까지의 경로가 하나로 한정되는 경우에 사용.      
> 장점: 라우팅 정보가 교환되지 않아 대역폭에 대한 부담이 적다      
> 라우팅 정보가 네트워크로 전달되지 않으므로 보안을 유지하는데도 좋음     
> 단점: 동적으로 반영되지 않으므로 어떤 경로에 장애가 발생해도 다른 경로로 우회가 불가능 > 관리자가 설정을 하나하나 변경해야 해서 번거로움      
> 2. 동적 라우팅     
> 네트워크 변경을 자동으로 감지하여 라우팅 테이블을 업데이트 하거나 네트워크 장애가 발생했을 때 라우터끼리 정보를 교환하여 최적의 경로로 전환하는 기능을 한다     
> 대규모 네트워크에서는 라우터에 많은 경로가 등록되기 때문에 정적 라우팅을 지원하지 않고 동적 라우팅을 사용하여 경로를 자동으로 업데이트 함     

---

# LESSON 9 무선 랜 이해하기

## 무선 랜의 구조
- 무선랜의 장점: 랜 케이블을 사용하지 않으므로 케이블이 지저분하게 엉키거나 걸리적 거리지 않아 편하고, 랜케이블이 닿지 않는 옆방에서도 통신이 가능
- 무선랜의 단점: 유선보다 속도가 불안정하고 전파가 약하면 연결이 잘 안되며, 유선 랜에 비해 통신 내용이 해킹될 위험이 높음 > 반드시 암호화나 인증 설정을 해두어야 함
![image](https://user-images.githubusercontent.com/87118337/148536091-a02f9c2e-9ca8-4028-aedd-da3f52962dc9.png)
- 무선랜의 구성: 무선 액세스 포인트(Wireless Access Point, WAP), 무선 클라이언트(컴퓨터나 스마트폰 등)
- 액세스 포인트와 클라이언트가 통신하기 위해서는 무선 랜 칩(chip)과 무선 랜 어댑터(adapter)가 필요함
- 무선 랜 어댑터는 USB 메모리 방식이나 컴퓨터 카드 방식이 있음
- 무선 액세스 포인트 기능은 보통 무선 공유기에 포함되어있음
- 넓음면 액세스 포인트를 여러대 설치해야 함

### 인프라스트럭처 방식 및 애드혹 방식
- 인프라스트럭처(Infrastructure) 방식: 무선 액세스 포인트를 통해 통신하는 방식
- 애드혹(Ad Hoc) 방식: 무선 클라이언트끼리 직접 통신하는 방식
- 주로 인프라스트럭처 방식을 사용

### 무선 랜 규격
- 무선랜은 IEEE802.11 규격을 준수하는 기기로 구성되어 있음
- IEEE802.11: 미국 기술 표준화 단체인 IEEE에서 승인한 무선 랜의 표준화 기술을 뜻함
- 무선 랜 규격
  - IEEE802.11ad 
    - 통신 속도(최대): 6.7Gbps
    - 주파수 대역: 60GHz
    - 특징: 초고속 통신
  - IEEE802.11ac
    - 통신 속도(최대): 6.9Gbps
    - 주파수 대역: 5GHz
    - 특징: 장애물이 많아도 고속 통신을 할 수 있고 전파 간섭을 적게 받음
  - IEEE802.11n
    - 통신 속도(최대): 300Mbps
    - 주파수 대역: 2.4GHz(장애물에 강하지만 전파 간섭을 적게 받는다), 5GHz(장애물에 약하지만 전파 간섭을 적게 받는다)
  - IEEE802.11a
    - 통신 속도(최대): 54Mbps
    - 주파수 대역: 5GHz
    - 특징: 장애물에 약하지만 전파 간섭을 적게 받는다
  - IEEE802.11g
    - 통신 속도(최대): 54Mbps
    - 주파수 대역: 2.4GHz
    - 특징: 장애물에 강하지만 전파 간섭을 쉽게 받는다
  - IEEE802.11b
    - 통신 속도(최대): 11Mbps
    - 주파수 대역: 2.4GHz
    - 특징: 장애물에 강하지만 전파 간섭을 쉽게 받는다
- 11b, 11g, 11a는 옛날 규격
- 현재는 11n, 11zd를 주로 사용
- 해당 규격을 쓰기 위해서는 클라이언트와 공유기가 모두 지원해야 함
- 무선 액세스 포인트는 무선 공유기, 무선 AP라고도 부름

## SSID의 구조
![image](https://user-images.githubusercontent.com/87118337/148541987-30665e8f-63fe-4501-936f-06ea8a20b29e.png)
- SSID(Service Set IDentifier): 액세스 포인트의 고유 이름
- 네트워크 이름, 인증, 암호화, 암호화 키를 설정해야 무선 클라이언트가 자동으로 무선 액세스 포인트를 찾아서 통신할 수 있음
- 무선 액세스 포인트는 비컨(beacon)이라고 하는 자기를 알리는 신호를 네트워크에 있는 모든 기기에 주기적으로 전송 > 무선 클라이언트는 이 신호를 잡아서 연결
- 신호를 받은 무선 클라이언트는 자신의 SSID와 같은지 무선 액세스 포인트에 문의
- 같은 SSID의 무선 액세스 포인트가 응답을 하고, 서로 존재를 알게 됨
- 설정된 인증 방식이 올바른지 확인
- 무선클라이언트는 무선 액세스 포인트에 연결을 요청
- 무선 액세스 포인트로부터 승인
- 연결하여 통신 가능

### 채널
- 무슨 액세스 포인트와 무선 클라이언트 사이의 거리가 멀어질수록 전파가 약해져서 접속이 잘 안되거나 통신 속도가 느려질 수 있음
- 이를 해결하기 위해서 무선 액세스 포인트를 여러 대 설치해야 하는데 > 이게 바로 채널
  
![image](https://user-images.githubusercontent.com/87118337/148542325-f00a9cc3-b01d-4520-a47f-cc696b337d69.png)
- 무선 랜은 여러 기기를 동시에 연결할 수 있도록 주파수 대역을 분할하는데, 그 주파수 대역을 **채널**이라고 부름
- 무선 공유기 A가 1, 2 컴퓨터를 연결하여 통신하면, A와 컴퓨터는 모두 같은 채널을 각각 설정 > 같은 주파수 대역을 사용
![image](https://user-images.githubusercontent.com/87118337/148542939-2942e919-3c30-4309-96ef-aa816d9eba1e.png)
- 전파가 겹치는 무선 공유기들이 같은 채널로 설정되어있으면 주파수가 서로 겹치면서 전파 간섭이 생기고 통신 속도가 느려짐
- 같은 채널을 사용하되 전파를 겹치지 않게 하려면 거리를 떨어트려야 함
- 
![image](https://user-images.githubusercontent.com/87118337/148543159-a2a825ae-94ce-4543-805f-476f79caf6a1.png)
- IEEE802.11b와 802.11g에서는 1채널과 2채널로 서로 다른 채널이지만 일부에서 같은 주파수를 사용해서 간섭이 생길 수 있음
- IEEE802.11a는 각 채널간에 서로 다른 주파수 대역을 사용하므로 전파가 겹쳐도 상관없음 (규격에 따라 다르다)
- 채널은 무선 액세스 포인트에서 자동으로 알아서 최적의 채널을 찾아줌
- 연결이 불안정하거나 통신 속도가 느려질때는 원인이 될 수 있으므로 채널을 수동으로 변경해보는 것도 좋음

