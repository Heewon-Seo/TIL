# LESSON 3 물리계층: 데이터를 전기 신호로 변환하기

## 물리 계층의 역할과 랜 카드의 구조
- 0과1 만으로 이루어진 비트열을 전기신호로 변환하려면 물리계층의 기술이 필요
- 전기 신호의 종류
  - 아날로그 신호 : 물결 모양, 전화회선이나 라디오 방송에 사용
  - 디지털 신호 : 막대 모양, 컴퓨터에서 사용
- 비트열 데이터를 송수신 할 때는, 송신 측에서 랜 카드를 통해 디지털 신호(전기 신호)로 바꾸고, 다시 수신 측에서도 전기 신호를 비트열(0과 1의 집합)로 변환한다

## 케이블의 종류와 구조
- 전송 매체는 데이터가 흐르는 물리적인 선로로 크게 유선, 무선으로 나뉨
  - 유선: 트위스트 페어 케이블, 광케이블
  - 무선: 라디오파, 마이크로파, 적외선
- 트위스트 페어 케이블
  - UTP(Unshielded Twist Pair) 케이블: 구리선 8개를 2개씩 꼬아 만든 4쌍의 전선으로 실드로 보호되어 있지 않은 케이블(실드는 금속 호일이나 금속의 매듭 같은 것으로 외부에서 발생하는 노이즈를 막는 역할)
    - 실드로 보호되어 있지 않아 노이즈의 영향을 받기 쉽지만 저렴하기 때문에 **일반적으로 많이 사용됨**
  - STP(Shielded Twist Pair) 케이블: 2개씩 꼬아 만든 선을 실드로 보호한 케이블로 노이즈의 영향을 매우 적게 받지만 비싸서 보편적으로 사용하지 않음
  - 노이즈: 케이블에 전기 신호가 흐를 때 발생
  - 트위스트 페어 케이블은 랜 케이블이라고도 함
  - 양쪽 끝에는 **RJ-45**라고 부르는 커텍터가 붙어 있음

### 랜 케이블의 종류
![image](https://user-images.githubusercontent.com/87118337/147570547-c1f52c7b-2909-4ddd-b3fd-6f2bc38d34ae.png)
- 다이렉트 케이블: 구리선 8개를 같은 순서로 커넥터에 연결
- 컴퓨터와 스위치를 연결할 떄 사용
![image](https://user-images.githubusercontent.com/87118337/147570606-3a6303cb-70cc-4be2-aaed-6d64079cccca.png)
- 크로스 케이블: 구리선 8개 중 한쪽 커넥터의 1번과 2번에 연결되는 구리선을 다른쪽 커넥터에 3번과 6번에 연결
- 컴퓨터 간에 직접 랜 케이블로 연결 할 때
- 직접 데이터를 보낼 떄는 양쪽 모두 1,2번 선을 사용
  - 동시에 데이터를 전송하면 충돌이 나기 때문에 크로스 케이블은 일부러 중간에 선을 교차시킴
- 사용하는 선은 1,2,3,6번 뿐 (나머지 4개는 사용하지 않음)

## 리피터와 허브의 구조

### 리피터
- 전기 신호를 정형(일그러진 전기 신호를 복원)하고 증폭하는 기능을 가진 네트워크 중계 장비
- 상대방이 멀리 있을 때 리피터를 사이에 넣어서 파형을 정상으로 만드는 기능을 교차시킴
- 요새는 다른 네트워크 장비가 리피터 기능을 지원하기 때문에 리피터르 쓸 필요가 없음

### 허브
- 포트(실제로 통신하는 통로)를 여러개 가지고 있는 리피터 허브라고도 불림
- 포트를 여러개 가지고 있어서 컴퓨터 여러대와 통신도 가능
- 랜 케이블을 이용하여 컴퓨터와 허브를 연결 할 수 있음
- 역할은 리피터와 똑같이 전기 신호를 정형하고 증폭하는 기능
- 컴퓨터에서 보낸 전기 신호가 허브에 도착하는 동안 노이즈의 영향으로 파형이 변경될 때가 있는데, 이때 파형을 정상으로 되돌리는 기능
- 컴퓨터 여러대를 서로 연결하는 장치이므로 직접 컴퓨터끼리 연결하지 않아도 통신 가능

![image](https://user-images.githubusercontent.com/87118337/147573465-5bee0124-54d4-43b0-a3d2-15d91fb9e074.png)
- 특정 포트로 데이터를 받을 경우, 나머지 모든 포트로도 받은 데이터를 전송하는 특징이 있음
- 1 > 2로 전송 시, 3,4,5에도 데이터가 전송 됨
- 이렇게 허브는 판단 기능이 없기 떄문에 **더미(Dummy) 허브**라고도 불림
- 그 대책으로 나온 것이 스위치!

# LESSON 4 데이터 링크 계층: 랜에서 데이터 전송하기

## 데이터 링크 계층의 역할과 이더넷
- OSI 모델에서 랜에서 데이터를 주고받으려면 2번째 계층인 데이터 링크 계층의 기술이 필요
- 데이터 링크 계층은 네트워크 장비 간에 신호를 주고받는 규칙을 정하는 계층
- 그 규칙 중에 가장 많이 사용되는 규칙이 **이더넷(Ethernet)**
- LESSON 3에서 나온대로 허브는 판단 기능이 없어서 특정 포트로 데이터를 받아도 나머지 모든 포트로도 받은 데이터를 전송하는데, 데이터의 내용을 못 보게 하는 규칙이 있음
- 그 규칙에 따라 데이터에 **목적지** 정보를 추가해서 보내고 목적지 이외의 컴퓨터는 데이터를 받더라도 무시하게 되어 있음
- 컴퓨터 여러대가 동시에 데이터를 보내면 충돌이 발생
- 이더넷은 여러 컴퓨터가 동시에 데이터를 전송해도 충돌이 일어나지 않는 구조로 되어 있음
- 데이터가 동시에 케이블을 지나가면 충돌 > 데이터를 보내는 시점을 늦춤
- 이 방법을 **CSMA/CD(Carrier Sense Multiple Access with Collision Detection: 반송파 감지 다중 접속 및 충돌 탐지)** 라고 함
  - CS: 데이터를 보내려고 하는 컴퓨터가 케이블에 신호가 흐르고 있는지 아닌지 확인
  - MA:  케이블에 데이터가 흐르고 있지 않다면 데이터를 보내도 됨
  - 현재는 효율이 떨어져서 거의 사용하지 않음
  - 대신 **스위치**를 사용

## MAC 주소의 구조
- 랜 카드는 비트열(0과 1)을 전기 신호로 변환하는데, 랜 카드에는 **MAC(Media Access Control Address) 주소** 라는 번호가 정해져 있고
- 제조할 때 새겨지는 것으로 **물리 주소** 라고도 하며, 전세계에서 유일한 번호
![image](https://user-images.githubusercontent.com/87118337/147574562-8ff43f39-1c63-43ea-a7f8-7542775cd9c8.png)
- 앞쪽 24비트와 뒤의 24비트 모두 정해진 규칙이 있어서 중복되지 않음

### MAC 주소를 이용한 통신
- 데이터 링크 계층(OSI 모델), 네트워크 계층(TCP/IP 모델)에서 이더넷 헤더 및 트레일러를 붙임
- 이더넷 헤더는 목적지 MAC 주소(6바이트) / 출발지 MAC 주소(6바이트) / 유형(2바이트) 의 총 14바이트로 구성
  - 유형이란? 이더넷으로 전송되는 상위 계층 프로토콜의 종류(IPv4, ARIP, RARP, SNMP over Ethernet, IPv6)
- 트레일러는 FCS(Frame Check Sequence)라고도 하는데, 데이터 전송 도중에 오류가 발생하는지 확인하는 용도
- 이렇게 이더넷 헤더와 트레일러가 추가된 데이터를 **프레임** 이라고 함!!

![image](https://user-images.githubusercontent.com/87118337/147575850-04094160-7e66-4280-8bb2-1b93ab6ece08.png)
- 목적지 주소와 자신의 주소를 붙여서 전송하면(캡슐화)
- 데이터는 다른 컴퓨터에도 전송되지만 목적지의 MAC 주소를 판단해서 데이터를 파기
- 목적지 MAC 주소와 자신의 MAC 주소가 같을 경우 데이터를 수신(역캡슐화)

## 스위치의 구조
- 스위치는 데이터 링크 계층에서 동작하며, 레이어 2 스위치 또는 스위칭 허브라고도 불림
- 생긴 거는 허브와 비슷
- 내부에는 MAC 주소 테이블이라는 것이 있음
  - 스위치의 포트 번호와 해당 포트에 연결되어 있는 컴퓨터의 MAC 주소가 등록되는 데이터베이스

### MAC 주소 학습 기능
![image](https://user-images.githubusercontent.com/87118337/147577073-a34d5f4f-32e2-423b-b3a9-1a6f23491ef9.png)
- 스위치의 전원을 켠 상태에는 아무것도 등록되지 않지만 프레임이 전송되면 테이블을 확인하고 출발지 MAC 주소가 등록되어 있지 않으면 MAC주소를 포트와 함꼐 등록
- 하지만 컴퓨터 1에서 컴퓨터 3에 데이터를 전송한 시점에는 아직 컴퓨터 3의 목적지 MAC 주소가 테이블에 등록되어 있지 않아서 송신포트 1 이외에도 프레임이 전송되는데 이를 **플러딩(flooding, 홍수)** 라고 부름
- 이미 테이블에 목적지 MAC 주소가 등록되어 있는 경우에는 지정된 컴퓨터에만 데이터(프레임)가 전송됨
![image](https://user-images.githubusercontent.com/87118337/147577387-c2a9f718-e815-4217-9f90-5cfd7a89fc63.png)
- 이렇게 MAC 주소를 기준으로 목적지를 선택하는 것을 **MAC 주소 필터링** 이라고 함

## 데이터가 케이블에서 충돌하지 않는 구조


## 이더넷의 종류와 특징
