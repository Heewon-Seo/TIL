
# LESSON 8 네트워크의 전체 흐름 살펴보기

## 랜 카드에서의 데이터 전달과 처리
![image](https://user-images.githubusercontent.com/87118337/148229829-e2fa5098-5357-4702-bf6f-80c11e2b19a9.png)

![image](https://user-images.githubusercontent.com/87118337/148231063-3b48d436-bbd8-49b1-9e11-e2143584edb0.png)
- 192.168.1.0/24
- 172.16.0.0/16
- 192.168.10.0/24
- 총 3개의 네트워크 구성

![image](https://user-images.githubusercontent.com/87118337/148231152-2d78db95-414b-4a2a-8c89-5f48d2e3ea60.png)
- 캡슐화 및 역캡슐화 
- 응용계층 > URL을 입력하고 엔터 > 캡슐화 > 3-way 핸드셰이크 > 연결 확립 > HTTP 프로토콜로 HTTP 메시지 보냄(GET /index.html HTTP/1 ...) > 이 데이터가 전송 계층에 전달 > 전송 계층에서 TCP 헤더를 붙여서 어느 애플리케이션에 데이터를 보내야 하는지 식별함 > 이때 필요한 것이 출발지 포트번호와 목적지 포트 번호 
  - 출발지 포트 번호(웹 브라우저): 잘 알려진 포트가 아닌 포트(1025번 이상인 포트) 중에서 무작위로 선택
  - 목적지 포트 번호(HTTP): 80번 포트
- 이렇게 세그먼트가 완성 > 네트워크 계층으로 감 > IP 헤더가 붙음 > 여기에는 출발지 IP 주소와 목적지 IP 주소가 추가됨 > IP 패킷 완성 > 이 데이터를 데이터 링크 계층으로 전달 > 여기서 이더넷 헤더가 붙음 > 이더넷 프레임이 됨 > 그다음으로 물리 계층에서 전기 신호로 변환되어 네트워크로 전송됨 

![image](https://user-images.githubusercontent.com/87118337/148391504-9d36658a-490d-4884-bfa5-99790c60de9b.png)

## 스위치와 라우터에서의 데이터 전달과 처리

### 스위치
![image](https://user-images.githubusercontent.com/87118337/148394332-320616a7-2058-4bae-8cd5-627b465756e0.png)
- 데이터 링크 계층에서 데이터를 전기 신호로 변환하여 라우터로 전송

### 라우터
![image](https://user-images.githubusercontent.com/87118337/148394638-243aaaff-d533-4feb-91bf-62583e45d800.png)
- 라우터에 도착한 전기 신호 > 데이터 링크 계층에서 이더넷 프레임의 목적지 MAC 주소와 자신의 MAC 주소를 비교 > 주소가 같으면 이더넷 헤더와 트레일러를 분리하여 역캡슐화 > 네트워크 계층에 전달하고 자신의 라우팅 테이블과 목적지 IP 주소를 비교
- 라우팅 테이블에서 목적지 IP 주소의 경로를 알 수 있으므로 라우팅을 할 수 있음
- 그러므로 현재 출발지 IP 주소를 라우터의 외부 IP 주소로 변경
- 그다음 데이터 링크 계층으로 전달해서 라우터로 보내지도록 이더넷 헤더와 트레일러를 붙이고, 물리 계층에서 데이터를 전기 신호로 변환해서 네트워크로 전달
![image](https://user-images.githubusercontent.com/87118337/148394900-937bc00a-20ce-4328-820b-ed2a8c68bdc0.png)
- 전기신호가 라우터 B에 도착하면 이더넷 프레임의 목적지 MAC 주소와 자신의 MAC 주소를 비교 > 주소가 같으면 이더넷 헤더와 트레일러를 분리 하는 역캡슐화 > 네트워크 계층으로 전달되면 자신의 라우팅 테이블과 목적지 IP를 비교
- 
![image](https://user-images.githubusercontent.com/87118337/148395921-0194238b-bd9a-4b05-bd33-8bd4bc8db8ea.png)
![image](https://user-images.githubusercontent.com/87118337/148399908-5b42f3f1-5ca9-43e7-bf6b-bab9c5b1aa06.png)
![image](https://user-images.githubusercontent.com/87118337/148400479-5cbd94cf-52ba-4861-b37a-3f6afeca6b87.png)
- 스위치 B는 전기 신호를 데이터 링크 계층에서 처리하고 웹 서버에 데이터를 전기 신호로 전달

## 웹 서버에서의 데이터 전달과 처리
![image](https://user-images.githubusercontent.com/87118337/148404389-70d49748-d30b-4ddf-b4f2-76d057b2fca4.png)
- 데이터가 전기신호로 웹 서버에 도착하면, 웹 서버는 데이터 링크 계층에서 이더넷 프레임의 목적지 MAC 주소와 자신의 MAC 주소를 비교 > 주소가 같으면 이더넷 헤더와 트레일러를 분리하고 네트워크 계층에 전달
![image](https://user-images.githubusercontent.com/87118337/148404480-3856f93a-3b7e-4dbf-a0a0-af36df2636e5.png)
- 네트워크 계층에서는 목적지 IP 주소와 웹 서버의 IP 주소를 확인하고 > 같으면 IP 헤더를 분리하고 전송 계층에 전달
![image](https://user-images.githubusercontent.com/87118337/148404669-4d56af14-ec1e-46ba-a3a3-41317a9bf28b.png)
- 전송 계층에서는 목적지 포트 번호를 확인하여 어떤 애플리케이션으로 전달해야 되는지 판단하고 TCP 헤더를 분리하여 응용 계층에 전달
![image](https://user-images.githubusercontent.com/87118337/148404806-8becd957-8527-46cb-a605-1d23f827cba0.png)
- 이제야 응용 계층에 도착

> **정적 라우팅과 동적 라우팅**
> 라우팅은 패킷을 목적지 컴퓨터까지 보낼 떄 최적의 경로를 선택하여 전송하는 것이다.
> 1. 정적 라우팅     
> 정적 라우팅은 관리자가 미리 라우팅 테이블에 경로를 수동으로 추가하는 방법이다. 목적지 까지의 경로를 고정하거나 목적지까지의 경로가 하나로 한정되는 경우에 사용.
> 장점: 라우팅 정보가 교환되지 않아 대역폭에 대한 부담이 적다
> 라우팅 정보가 네트워크로 전달되지 않으므로 보안을 유지하는데도 좋음
> 단점: 동적으로 반영되지 않으므로 어떤 경로에 장애가 발생해도 다른 경로로 우회가 불가능 > 관리자가 설정을 하나하나 변경해야 해서 번거로움
> 2. 동적 라우팅     
> 네트워크 변경을 자동으로 감지하여 라우팅 테이블을 업데이트 하거나 네트워크 장애가 발생했을 때 라우터끼리 정보를 교환하여 최적의 경로로 전환하는 기능을 한다
> 대규모 네트워크에서는 라우터에 많은 경로가 등록되기 때문에 정적 라우팅을 지원하지 않고 동적 라우팅을 사용하여 경로를 자동으로 업데이트 함


## 웹 서버에서의 데이터 전달과 처리

---

# LESSON 9 무선 랜 이해하기

## 무선 랜의 구조

## SSID의 구조
